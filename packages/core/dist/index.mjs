"use client";
import{LexicalComposer as C}from"@lexical/react/LexicalComposer";import{RichTextPlugin as T}from"@lexical/react/LexicalRichTextPlugin";import{ContentEditable as E}from"@lexical/react/LexicalContentEditable";import{HistoryPlugin as k}from"@lexical/react/LexicalHistoryPlugin";import{LexicalErrorBoundary as v}from"@lexical/react/LexicalErrorBoundary";import{useLexicalComposerContext as p}from"@lexical/react/LexicalComposerContext";import{$getSelection as g,$isRangeSelection as m,FORMAT_TEXT_COMMAND as x}from"lexical";import{useCallback as s,useEffect as u,useState as f}from"react";import{createPortal as b}from"react-dom";import{jsx as c,jsxs as h}from"react/jsx-runtime";function y(){let[o]=p(),[r,i]=f(null),t=s(()=>{let e=g();if(m(e)&&!e.isCollapsed()){let l=window.getSelection();if(l&&l.rangeCount>0){let a=l.getRangeAt(0).getBoundingClientRect();a&&i({x:a.left+a.width/2,y:a.top-40})}}else i(null)},[]);u(()=>o.registerUpdateListener(({editorState:e})=>{e.read(()=>t())}),[o,t]),u(()=>{let e=()=>{setTimeout(()=>t(),0)};return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[t]);let d=s(e=>{o.dispatchCommand(x,e)},[o]);return r?b(h("div",{className:"luxe-floating-toolbar",style:{position:"fixed",top:`${r.y}px`,left:`${r.x}px`,transform:"translateX(-50%)",display:"flex",gap:"4px",background:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"4px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:[c("button",{onClick:()=>d("bold"),style:{padding:"6px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontWeight:"bold"},onMouseEnter:e=>{e.currentTarget.style.background="#f3f4f6"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"B"}),c("button",{onClick:()=>d("italic"),style:{padding:"6px 12px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"4px",fontStyle:"italic"},onMouseEnter:e=>{e.currentTarget.style.background="#f3f4f6"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"I"})]}),document.body):null}import{jsx as n,jsxs as L}from"react/jsx-runtime";var R={paragraph:"luxe-paragraph",text:{bold:"luxe-bold",italic:"luxe-italic"}};function X({initialConfig:o,children:r}){let i={...o,theme:R,onError:t=>console.error(t)};return n(C,{initialConfig:i,children:L("div",{className:"luxe-editor-container",children:[n(T,{contentEditable:n(E,{className:"luxe-input"}),placeholder:n("div",{className:"luxe-placeholder",children:"Start writing..."}),ErrorBoundary:v}),n(k,{}),r]})})}export{y as FloatingToolbarPlugin,X as LuxeEditor};
